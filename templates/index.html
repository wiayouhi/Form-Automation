<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WIA : Automate Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #6366f1;
            --secondary: #ec4899;
            --bg-dark: #0f172a;
            --glass: rgba(30, 41, 59, 0.75);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--bg-dark);
            font-family: 'Outfit', sans-serif;
            color: white;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- Animated Background --- */
        .bg-animate {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 15% 50%, rgba(99, 102, 241, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(236, 72, 153, 0.15) 0%, transparent 25%);
            animation: bg-pulse 10s ease-in-out infinite alternate;
        }
        @keyframes bg-pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        .grid-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -1;
            mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
        }

        /* --- Glassmorphism --- */
        .glass-panel {
            background: var(--glass);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        /* --- Custom Scrollbar --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        ::-webkit-scrollbar-track { background: #1e293b; }

        /* --- Animations --- */
        .slide-up { animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(30px); }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }
        
        .fade-in { animation: fadeIn 0.8s ease-out forwards; opacity: 0; }
        @keyframes fadeIn { to { opacity: 1; } }

        .pop-in { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; transform: scale(0.8); opacity: 0; }
        @keyframes popIn { to { transform: scale(1); opacity: 1; } }

        .tilt-card { transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .tilt-card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 10px 40px -10px rgba(99,102,241,0.3); }

        /* --- Page Transition Animations --- */
        .page-enter {
            animation: pageEnter 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes pageEnter {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .page-exit {
            animation: pageExit 0.3s ease-in forwards;
        }
        @keyframes pageExit {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.98); }
        }

        /* --- Custom Toast Notification --- */
        #toast-container {
            position: fixed; top: 20px; right: 20px; z-index: 9999;
            display: flex; flex-direction: column; gap: 10px;
        }
        .toast-item {
            animation: toastSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            transform: translateX(100%); opacity: 0;
        }
        @keyframes toastSlideIn { to { transform: translateX(0); opacity: 1; } }
        .toast-exit { animation: toastSlideOut 0.4s forwards; }
        @keyframes toastSlideOut { to { transform: translateX(100%); opacity: 0; } }

        /* --- Loader --- */
        #loader {
            position: fixed; inset: 0; z-index: 100;
            background: #000;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        .loader-text span {
            display: inline-block; opacity: 0; transform: translateY(20px);
            animation: reveal 0.5s forwards;
            font-family: 'Space Grotesk', sans-serif; font-weight: 900; font-size: 3rem;
            background: linear-gradient(to right, #818cf8, #c084fc);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        @keyframes reveal { to { opacity: 1; transform: translateY(0); } }

        /* --- Nav & Tags --- */
        .nav-item.active {
            background: linear-gradient(90deg, rgba(99,102,241,0.2), transparent);
            border-left: 3px solid #818cf8;
            color: #818cf8;
        }
        .tag-chip { animation: popIn 0.3s ease-out; }

        /* --- Mobile Floating Menu --- */
        .mobile-dock {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
        }
        .mobile-nav-btn.active i {
            color: #818cf8;
            text-shadow: 0 0 15px rgba(129, 140, 248, 0.5);
        }
    </style>
</head>
<body class="antialiased selection:bg-indigo-500 selection:text-white">

    <div id="toast-container"></div>

    <div id="loader">
        <div class="loader-text space-x-2">
            <span style="animation-delay: 0.1s">W</span>
            <span style="animation-delay: 0.2s">I</span>
            <span style="animation-delay: 0.3s">A</span>
            <span style="animation-delay: 0.4s">_</span>
            <span style="animation-delay: 0.5s">P</span>
            <span style="animation-delay: 0.6s">R</span>
            <span style="animation-delay: 0.7s">O</span>
        </div>
    </div>

    <div class="bg-animate"></div>
    <div class="grid-bg"></div>

    <div class="flex h-screen overflow-hidden max-w-[1600px] mx-auto relative">
        
        <aside class="hidden md:flex w-64 glass-panel border-r border-slate-700 flex-col z-20 transition-all duration-300">
            <div class="p-6 flex items-center justify-start">
                <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/30">
                    <i class="fa-solid fa-robot text-white text-lg"></i>
                </div>
                <h1 class="ml-4 text-xl font-bold tracking-wider">AUTO<span class="text-indigo-400">PRO</span></h1>
            </div>

            <nav class="mt-8 flex-1 space-y-2 px-2">
                <button onclick="switchTab('home')" id="nav-home" class="nav-item w-full flex items-center p-3 text-slate-400 hover:text-white hover:bg-slate-800/50 rounded-lg transition-all active">
                    <i class="fa-solid fa-house w-6 text-center"></i>
                    <span class="ml-3 font-medium">Overview</span>
                </button>
                <button onclick="switchTab('tool')" id="nav-tool" class="nav-item w-full flex items-center p-3 text-slate-400 hover:text-white hover:bg-slate-800/50 rounded-lg transition-all">
                    <i class="fa-solid fa-bolt w-6 text-center"></i>
                    <span class="ml-3 font-medium">Automation Console</span>
                </button>
            </nav>

            <div class="p-4 border-t border-slate-700/50 space-y-3">
                <div class="glass-panel p-3 rounded-xl">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-[10px] text-slate-400 font-bold uppercase">Server Load</span>
                        <i class="fa-solid fa-server text-indigo-400 text-xs"></i>
                    </div>
                    <div class="space-y-2">
                        <div>
                            <div class="flex justify-between text-[10px] text-slate-300 mb-1">
                                <span>CPU</span>
                                <span id="cpu-val" class="text-indigo-300">0%</span>
                            </div>
                            <div class="h-1 bg-slate-700 rounded-full overflow-hidden">
                                <div id="cpu-bar" class="h-full bg-indigo-500 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] text-slate-300 mb-1">
                                <span>RAM</span>
                                <span id="ram-val" class="text-pink-300">0%</span>
                            </div>
                            <div class="h-1 bg-slate-700 rounded-full overflow-hidden">
                                <div id="ram-bar" class="h-full bg-pink-500 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-3 rounded-xl flex items-center space-x-3">
                    <div class="relative">
                        <div id="ping-dot" class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                    </div>
                    <div>
                        <p class="text-[10px] text-slate-400 uppercase">Latency</p>
                        <p id="ping-val" class="text-xs font-mono font-bold text-emerald-400">...</p>
                    </div>
                </div>
            </div>
        </aside>

        <main class="flex-1 overflow-y-auto relative p-4 md:p-8 scroll-smooth pb-32 md:pb-8">
            
            <header class="md:hidden flex justify-between items-center mb-6 px-2">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-pink-500 rounded-lg flex items-center justify-center">
                        <i class="fa-solid fa-robot text-white text-xs"></i>
                    </div>
                    <h2 class="text-lg font-bold">WIA DEV</h2>
                </div>
                <div id="clock-mobile" class="text-sm font-mono text-indigo-300 bg-slate-800/50 px-3 py-1 rounded-full border border-slate-700">00:00</div>
            </header>

            <section id="section-home" class="space-y-6 max-w-6xl mx-auto page-enter">
                
                <div class="glass-panel rounded-3xl p-8 md:p-14 relative overflow-hidden slide-up group">
                    <div class="absolute top-0 right-0 -mr-20 -mt-20 w-80 h-80 bg-indigo-600/20 rounded-full blur-3xl group-hover:bg-indigo-600/30 transition-all duration-700"></div>
                    <div class="relative z-10">
                        <div class="inline-flex items-center px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/30 text-indigo-300 text-xs font-bold mb-6 animate-pulse">
                            <span class="flex w-2 h-2 bg-indigo-500 rounded-full mr-2"></span> SYSTEM OPERATIONAL
                        </div>
                        <h1 class="text-4xl md:text-7xl font-black mb-6 font-['Space_Grotesk'] leading-tight tracking-tight">
                            DOMINATE <br>
                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400">YOUR WORKFLOW</span>
                        </h1>
                        <p class="text-slate-400 max-w-xl text-lg md:text-xl mb-10 leading-relaxed">
                            สัมผัสประสบการณ์ Form Automation ระดับ Enterprise เร็ว แรง เสถียร ด้วยระบบ Multi-Thread Engine และ Smart Input System ใหม่ล่าสุด
                        </p>
                        <div class="flex flex-col md:flex-row gap-4">
                            <button onclick="switchTab('tool')" class="bg-white text-slate-900 px-8 py-4 rounded-full font-bold hover:scale-105 transition-transform shadow-[0_0_30px_rgba(255,255,255,0.2)] flex items-center justify-center">
                                LAUNCH CONSOLE <i class="fa-solid fa-rocket ml-2"></i>
                            </button>
                            <a href="https://github.com/wiayouhi" target="_blank" class="bg-slate-800/50 border border-slate-600 text-white px-8 py-4 rounded-full font-bold hover:bg-slate-800 transition-colors flex items-center justify-center">
                                <i class="fa-brands fa-github mr-2"></i> GITHUB REPO
                            </a>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="glass-panel p-6 rounded-2xl tilt-card slide-up" style="animation-delay: 0.1s">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-slate-400 text-xs uppercase tracking-widest font-bold">Bangkok Time</p>
                                <h2 id="clock-time" class="text-4xl font-mono font-bold mt-2 text-white">--:--</h2>
                                <p id="clock-date" class="text-indigo-400 text-sm mt-1">Syncing...</p>
                            </div>
                            <div class="w-10 h-10 rounded-full bg-slate-800/50 flex items-center justify-center">
                                <i class="fa-regular fa-clock text-xl text-slate-400"></i>
                            </div>
                        </div>
                    </div>
                    <div class="glass-panel p-6 rounded-2xl tilt-card slide-up" style="animation-delay: 0.2s">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-slate-400 text-xs uppercase tracking-widest font-bold">Weather Data</p>
                                <div class="flex items-end mt-2">
                                    <h2 id="weather-temp" class="text-4xl font-bold text-white">--</h2>
                                    <span class="text-lg text-slate-400 mb-1 ml-1">°C</span>
                                </div>
                                <p id="weather-desc" class="text-emerald-400 text-sm mt-1 flex items-center"><i class="fa-solid fa-wifi text-[10px] mr-1"></i> Live</p>
                            </div>
                            <div class="w-10 h-10 rounded-full bg-slate-800/50 flex items-center justify-center">
                                <i id="weather-icon" class="fa-solid fa-cloud text-xl text-slate-400"></i>
                            </div>
                        </div>
                    </div>
                    <div class="glass-panel p-6 rounded-2xl tilt-card slide-up" style="animation-delay: 0.3s">
                        <div class="flex items-center gap-4">
                            <div class="relative">
                                <img src="https://github.com/wiayouhi.png" class="w-14 h-14 rounded-full border-2 border-indigo-500 shadow-lg shadow-indigo-500/20">
                                <div class="absolute -bottom-1 -right-1 bg-slate-900 rounded-full p-1">
                                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                </div>
                            </div>
                            <div>
                                <p class="text-xs text-slate-400 uppercase tracking-wider">Lead Developer</p>
                                <h3 class="font-bold text-lg text-white">Thanawat Wia</h3>
                                <div class="flex space-x-3 mt-1 text-slate-400">
                                    <a href="https://fellow-alica-wia-637aeaf1.koyeb.app/" class="hover:text-indigo-400 transition-colors"><i class="fa-solid fa-code"></i></a>
                                    <a href="https://www.instagram.com/thanawat.wia" class="hover:text-pink-400 transition-colors"><i class="fa-brands fa-instagram"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-6 md:p-8 rounded-2xl slide-up relative overflow-hidden" style="animation-delay: 0.4s">
                    <div class="absolute -right-6 -top-6 text-slate-800/30 rotate-12">
                        <i class="fa-brands fa-discord text-[150px]"></i>
                    </div>
                    
                    <div class="relative z-10 flex flex-col md:flex-row items-center gap-8">
                        <div class="flex items-center gap-4 bg-slate-900/40 p-4 rounded-xl border border-slate-700/50 w-full md:w-auto min-w-[240px]">
                            <div class="relative">
                                <img id="discord-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" class="w-16 h-16 rounded-full border-2 border-slate-700/50 transition-all duration-500">
                                <div id="discord-main-status" class="absolute bottom-0 right-0 w-5 h-5 bg-gray-500 border-4 border-[#13151b] rounded-full"></div>
                            </div>
                            <div>
                                <h4 id="discord-username" class="font-bold text-lg text-white leading-tight">Loading...</h4>
                                <p id="discord-tag" class="text-xs text-slate-400 font-mono">@...</p>
                                <div class="mt-1 inline-block px-2 py-0.5 bg-slate-800 rounded text-[10px] text-slate-300 border border-slate-700">PRO USER</div>
                            </div>
                        </div>

                        <div class="hidden md:block w-px h-16 bg-gradient-to-b from-transparent via-slate-600 to-transparent"></div>

                        <div class="flex-1 w-full">
                            <h3 class="text-xs font-bold text-indigo-400 uppercase mb-3 flex items-center">
                                <i class="fa-solid fa-gamepad mr-2"></i> Current Activity
                            </h3>
                            <div class="flex items-center gap-4">
                                <img id="discord-activity-img" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" class="w-12 h-12 rounded-lg bg-slate-800 object-cover opacity-50">
                                <div>
                                    <p id="discord-activity-name" class="font-bold text-white text-lg">No Game Detected</p>
                                    <p id="discord-activity-details" class="text-sm text-slate-400">System Standing By</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="section-tool" class="hidden space-y-6 max-w-6xl mx-auto">
                
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold font-['Space_Grotesk']">Automation Console</h2>
                        <p class="text-xs text-slate-400">Control Panel / <span class="text-indigo-400">Active</span></p>
                    </div>
                    <button onclick="window.location.reload()" class="w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center hover:bg-slate-700 text-slate-400 transition-colors">
                        <i class="fa-solid fa-rotate-right"></i>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    
                    <div class="lg:col-span-2 space-y-6">
                        
                        <div class="glass-panel p-5 md:p-6 rounded-2xl">
                            <label class="text-[10px] font-bold text-indigo-400 uppercase tracking-wider mb-2 block">
                                <i class="fa-solid fa-link mr-1"></i> Target Form URL (Prefill Link)
                            </label>
                            <div class="flex flex-col md:flex-row gap-2">
                                <input type="text" id="url" class="flex-1 bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all text-white placeholder-slate-600" placeholder="https://docs.google.com/forms/d/e/.../viewform?usp=pp_url...">
                                <button onclick="fetchEntries()" class="bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-xl font-bold text-sm shadow-lg shadow-indigo-600/20 active:scale-95 transition-all flex justify-center items-center">
                                    <i class="fa-solid fa-cloud-arrow-down mr-2"></i> FETCH
                                </button>
                            </div>
                        </div>

                        <div class="glass-panel p-5 md:p-6 rounded-2xl min-h-[300px] flex flex-col">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-bold text-sm flex items-center">
                                    <i class="fa-solid fa-list-check mr-2 text-pink-500"></i> Form Entries
                                </h3>
                                <button onclick="addManualEntry()" class="text-xs bg-slate-800 hover:bg-slate-700 px-3 py-1.5 rounded-lg transition-colors border border-slate-700">
                                    <i class="fa-solid fa-plus mr-1"></i> Manual Add
                                </button>
                            </div>
                            
                            <div id="entry-list" class="space-y-4 flex-1 overflow-y-auto pr-2 custom-scrollbar">
                                <div class="h-full flex flex-col items-center justify-center text-slate-500 border-2 border-dashed border-slate-800 rounded-xl p-8">
                                    <div class="w-12 h-12 bg-slate-800/50 rounded-full flex items-center justify-center mb-3">
                                        <i class="fa-solid fa-arrow-up text-indigo-400"></i>
                                    </div>
                                    <p class="text-sm font-medium">Waiting for URL</p>
                                    <p class="text-xs opacity-60">Paste URL and click Fetch to load entries</p>
                                </div>
                            </div>
                        </div>

                        <div class="glass-panel p-5 md:p-6 rounded-2xl">
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                <div>
                                    <label class="block text-[10px] text-slate-400 font-bold mb-1.5 ml-1">TOTAL JOBS</label>
                                    <input type="number" id="total" value="50" class="w-full bg-slate-900/50 border border-slate-700 rounded-xl p-3 text-center font-mono focus:border-indigo-500 focus:outline-none transition-colors">
                                </div>
                                <div>
                                    <label class="block text-[10px] text-slate-400 font-bold mb-1.5 ml-1">THREADS</label>
                                    <input type="number" id="bots" value="10" class="w-full bg-slate-900/50 border border-slate-700 rounded-xl p-3 text-center font-mono focus:border-indigo-500 focus:outline-none transition-colors">
                                </div>
                                <div>
                                    <label class="block text-[10px] text-slate-400 font-bold mb-1.5 ml-1">DELAY (S)</label>
                                    <input type="number" id="delay" value="0.5" step="0.1" class="w-full bg-slate-900/50 border border-slate-700 rounded-xl p-3 text-center font-mono focus:border-indigo-500 focus:outline-none transition-colors">
                                </div>
                                <div>
                                    <label class="block text-[10px] text-pink-400 font-bold mb-1.5 ml-1">PAGES</label>
                                    <input type="number" id="pages" value="1" min="1" class="w-full bg-slate-900/50 border border-pink-500/50 rounded-xl p-3 text-center font-mono focus:border-pink-500 focus:outline-none transition-colors text-pink-400 font-bold">
                                </div>
                            </div>
                            
                            <div class="flex gap-3">
                                <button onclick="startProcess()" id="btn-start" class="flex-1 py-4 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 font-bold text-lg shadow-[0_0_20px_rgba(99,102,241,0.4)] hover:shadow-[0_0_30px_rgba(99,102,241,0.6)] hover:scale-[1.01] active:scale-95 transition-all relative overflow-hidden group text-white">
                                    <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                                    <span class="relative z-10 flex items-center justify-center">
                                        <i class="fa-solid fa-play mr-2"></i> START SYSTEM
                                    </span>
                                </button>
                                
                                <button onclick="stopProcess()" id="btn-stop" class="hidden w-20 md:w-32 rounded-xl bg-red-500/10 border border-red-500/50 text-red-400 font-bold hover:bg-red-500 hover:text-white transition-all active:scale-95">
                                    STOP
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-1 flex flex-col gap-6">
                        <div class="glass-panel p-5 rounded-2xl">
                            <h3 class="text-xs font-bold text-slate-400 uppercase mb-4">Realtime Metrics</h3>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-emerald-500/5 border border-emerald-500/20 p-4 rounded-xl text-center relative overflow-hidden">
                                    <div class="absolute inset-0 bg-emerald-500/10 blur-xl"></div>
                                    <h4 id="stat-success" class="text-3xl font-black text-emerald-400 relative z-10">0</h4>
                                    <p class="text-[10px] font-bold text-emerald-200/70 relative z-10 mt-1">SUCCESSFUL</p>
                                </div>
                                <div class="bg-red-500/5 border border-red-500/20 p-4 rounded-xl text-center relative overflow-hidden">
                                    <div class="absolute inset-0 bg-red-500/10 blur-xl"></div>
                                    <h4 id="stat-fail" class="text-3xl font-black text-red-400 relative z-10">0</h4>
                                    <p class="text-[10px] font-bold text-red-200/70 relative z-10 mt-1">FAILED</p>
                                </div>
                            </div>
                        </div>

                        <div class="glass-panel rounded-2xl flex-1 flex flex-col overflow-hidden border border-slate-700 h-[450px] md:h-auto shadow-2xl">
                            <div class="bg-[#0b101b] p-3 px-4 flex justify-between items-center border-b border-slate-800">
                                <div class="flex items-center space-x-2">
                                    <i class="fa-solid fa-terminal text-slate-500 text-xs"></i>
                                    <span class="text-xs font-mono text-slate-400">root@wia-server:~</span>
                                </div>
                                <div class="flex space-x-1.5">
                                    <div class="w-2.5 h-2.5 rounded-full bg-slate-600"></div>
                                    <div class="w-2.5 h-2.5 rounded-full bg-slate-600"></div>
                                </div>
                            </div>
                            <div id="log-container" class="flex-1 bg-[#05080f] p-4 font-mono text-[11px] md:text-xs overflow-y-auto space-y-1.5 text-slate-300">
                                <div class="text-indigo-400">> Initializing WIA Automate Pro V2.5...</div>
                                <div class="text-emerald-400">> System interfaces loaded.</div>
                                <div class="text-slate-500">> Waiting for command input...</div>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </main>

        <div class="md:hidden fixed bottom-6 left-6 right-6 z-50">
            <div class="mobile-dock rounded-2xl p-2 flex justify-around items-center">
                <button onclick="switchTab('home')" id="mob-nav-home" class="mobile-nav-btn active flex-1 py-3 rounded-xl transition-all flex flex-col items-center justify-center text-slate-400 active:bg-slate-800/50">
                    <i class="fa-solid fa-house text-xl mb-1 transition-all"></i>
                    <span class="text-[10px] font-bold">Home</span>
                </button>
                <div class="w-px h-8 bg-slate-700/50"></div>
                <button onclick="switchTab('tool')" id="mob-nav-tool" class="mobile-nav-btn flex-1 py-3 rounded-xl transition-all flex flex-col items-center justify-center text-slate-400 active:bg-slate-800/50">
                    <i class="fa-solid fa-bolt text-xl mb-1 transition-all"></i>
                    <span class="text-[10px] font-bold">Console</span>
                </button>
            </div>
        </div>

    </div>

    <script>
        // --- NEW: Custom Toast Notification System ---
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            
            // Create toast element
            const toast = document.createElement('div');
            const colors = {
                error: 'border-red-500 bg-red-500/10 text-red-200',
                success: 'border-emerald-500 bg-emerald-500/10 text-emerald-200',
                info: 'border-indigo-500 bg-indigo-500/10 text-indigo-200'
            };
            const icons = {
                error: 'fa-circle-xmark',
                success: 'fa-circle-check',
                info: 'fa-circle-info'
            };
            
            const colorClass = colors[type] || colors.info;
            const iconClass = icons[type] || icons.info;

            toast.className = `toast-item glass-panel border-l-4 ${colorClass} p-4 rounded-r-lg shadow-lg flex items-center gap-3 min-w-[300px]`;
            toast.innerHTML = `
                <i class="fa-solid ${iconClass} text-xl"></i>
                <div class="flex-1">
                    <h4 class="font-bold text-sm uppercase">${type}</h4>
                    <p class="text-xs opacity-90">${message}</p>
                </div>
            `;

            container.appendChild(toast);

            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.add('toast-exit');
                setTimeout(() => toast.remove(), 400);
            }, 3000);
        }

        // --- 1. SYSTEM INIT & ANIMATION ---
        window.addEventListener('load', () => {
            setTimeout(() => {
                const loader = document.getElementById('loader');
                loader.style.opacity = '0';
                
                // Trigger page entry animation when loader finishes
                document.getElementById('section-home').classList.add('page-enter');
                
                setTimeout(() => loader.style.visibility = 'hidden', 800);
            }, 1500);
        });

        // --- 2. TAB NAVIGATION (With Transitions) ---
        function switchTab(tab) {
            const home = document.getElementById('section-home');
            const tool = document.getElementById('section-tool');
            
            // Sidebar buttons
            const navHome = document.getElementById('nav-home');
            const navTool = document.getElementById('nav-tool');
            
            // Mobile buttons
            const mobHome = document.getElementById('mob-nav-home');
            const mobTool = document.getElementById('mob-nav-tool');

            // Determine active/inactive
            let current, next;
            if(tab === 'home') {
                if(!home.classList.contains('hidden')) return; // Already here
                current = tool;
                next = home;
                
                // Update Buttons
                navHome.classList.add('active'); navTool.classList.remove('active');
                mobHome.classList.add('active'); mobTool.classList.remove('active');
            } else {
                if(!tool.classList.contains('hidden')) return;
                current = home;
                next = tool;

                navHome.classList.remove('active'); navTool.classList.add('active');
                mobHome.classList.remove('active'); mobTool.classList.add('active');
            }

            // Animation Logic
            current.classList.remove('page-enter');
            current.classList.add('page-exit');

            setTimeout(() => {
                current.classList.add('hidden');
                current.classList.remove('page-exit');
                
                next.classList.remove('hidden');
                next.classList.add('page-enter');
            }, 300); // Matches CSS duration
        }

        // --- 3. CLOCK & WEATHER & SERVER STATS ---
        function updateTime() {
            const now = new Date();
            document.getElementById('clock-time').innerText = now.toLocaleTimeString('th-TH', {hour:'2-digit', minute:'2-digit'});
            document.getElementById('clock-date').innerText = now.toLocaleDateString('en-US', {weekday:'short', day:'numeric', month:'short'});
            document.getElementById('clock-mobile').innerText = now.toLocaleTimeString('th-TH', {hour:'2-digit', minute:'2-digit'});
        }
        setInterval(updateTime, 1000); updateTime();

        // --- NEW: Real Server Stats Fetcher ---
        async function fetchServerStats() {
            try {
                // This expects an endpoint like /api/stats returning { cpu: 45, ram: 60 }
                // If API doesn't exist, it will fail silently or show default
                const res = await fetch('/api/stats');
                if(res.ok) {
                    const data = await res.json();
                    
                    document.getElementById('cpu-val').innerText = `${data.cpu}%`;
                    document.getElementById('cpu-bar').style.width = `${data.cpu}%`;
                    
                    document.getElementById('ram-val').innerText = `${data.ram}%`;
                    document.getElementById('ram-bar').style.width = `${data.ram}%`;
                    
                    // Optional: Color coding
                    document.getElementById('cpu-bar').className = `h-full rounded-full transition-all duration-500 ${data.cpu > 80 ? 'bg-red-500' : 'bg-indigo-500'}`;
                }
            } catch(e) {
                // Simulation for UI testing if no server (Remove this block in production if needed)
                // const mockCpu = Math.floor(Math.random() * 30) + 10;
                // const mockRam = Math.floor(Math.random() * 20) + 40;
                // document.getElementById('cpu-val').innerText = `${mockCpu}%`;
                // document.getElementById('cpu-bar').style.width = `${mockCpu}%`;
                // document.getElementById('ram-val').innerText = `${mockRam}%`;
                // document.getElementById('ram-bar').style.width = `${mockRam}%`;
            }
        }
        // Update stats every 3 seconds
        setInterval(fetchServerStats, 3000);

        async function fetchWeather() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=13.75&longitude=100.51&current_weather=true');
                const data = await res.json();
                document.getElementById('weather-temp').innerText = Math.round(data.current_weather.temperature);
                document.getElementById('weather-desc').innerHTML = `<i class="fa-solid fa-wind mr-1"></i> ${data.current_weather.windspeed} km/h`;
            } catch(e) {}
        }
        fetchWeather();

        // --- 4. DISCORD LANYARD ---
        const DISCORD_ID = "902739412172046427"; 
        const ws = new WebSocket("wss://api.lanyard.rest/socket");
        ws.onopen = () => ws.send(JSON.stringify({ op: 2, d: { subscribe_to_ids: [DISCORD_ID] } }));
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            if(data.op === 1) setInterval(() => ws.send(JSON.stringify({ op: 3 })), data.d.heartbeat_interval);
            if(data.t === "INIT_STATE" || data.t === "PRESENCE_UPDATE") updateDiscord(data.d);
        };
        
        function updateDiscord(d) {
            const user = d[DISCORD_ID] || d; 
            if(!user) return;
            
            if(user.discord_user) {
                document.getElementById('discord-username').innerText = user.discord_user.global_name || user.discord_user.username;
                document.getElementById('discord-tag').innerText = `@${user.discord_user.username}`;
                const av = `https://cdn.discordapp.com/avatars/${user.discord_user.id}/${user.discord_user.avatar}.png`;
                if(document.getElementById('discord-avatar').src !== av) {
                    document.getElementById('discord-avatar').src = av;
                }
            }

            const statusColors = { online: 'bg-green-500', idle: 'bg-yellow-500', dnd: 'bg-red-500', offline: 'bg-gray-500' };
            const color = statusColors[user.discord_status] || 'bg-gray-500';
            document.getElementById('discord-main-status').className = `absolute bottom-0 right-0 w-5 h-5 border-4 border-[#13151b] rounded-full ${color}`;

            const activity = user.activities.find(a => a.type === 0 || a.type === 2);
            if(activity) {
                document.getElementById('discord-activity-name').innerText = activity.name;
                document.getElementById('discord-activity-details').innerText = activity.details || activity.state || "Playing";
                if(activity.assets?.large_image) {
                    let url = activity.assets.large_image.startsWith("mp:") 
                        ? `https://media.discordapp.net/${activity.assets.large_image.replace("mp:", "")}`
                        : `https://cdn.discordapp.com/app-assets/${activity.application_id}/${activity.assets.large_image}.png`;
                    document.getElementById('discord-activity-img').src = url;
                    document.getElementById('discord-activity-img').classList.remove('opacity-50');
                }
            }
        }

        // --- 5. NEW: TAGS INPUT SYSTEM ---
        function createTagUI(containerId, value) {
            if(!value.trim()) return;
            const container = document.getElementById(containerId);
            const span = document.createElement('span');
            span.className = "tag-chip inline-flex items-center gap-1.5 px-3 py-1 bg-indigo-500/20 border border-indigo-500/40 rounded-lg text-sm text-indigo-200";
            span.dataset.value = value.trim();
            span.innerHTML = `
                ${value} 
                <button onclick="this.parentElement.remove()" class="text-indigo-400 hover:text-white transition-colors w-4 h-4 flex items-center justify-center rounded-full hover:bg-indigo-500/50">
                    <i class="fa-solid fa-xmark text-[10px]"></i>
                </button>
            `;
            container.appendChild(span);
        }

        function handleInputEnter(e, inputId, containerId) {
            if (e.key === 'Enter') {
                const input = document.getElementById(inputId);
                createTagUI(containerId, input.value);
                input.value = '';
            }
        }

        function manualAddTag(inputId, containerId) {
            const input = document.getElementById(inputId);
            createTagUI(containerId, input.value);
            input.value = '';
        }

        function createEntryCard(id, initialVal, isManual) {
            const uid = Math.random().toString(36).substr(2, 9);
            const card = document.createElement('div');
            card.className = "bg-slate-800/40 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/50 transition-all fade-in";
            card.id = `card-${uid}`;
            
            card.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <div class="flex items-center gap-2 flex-1">
                        <div class="w-2 h-2 rounded-full bg-indigo-500"></div>
                        <input value="${id}" class="bg-transparent text-xs font-mono text-slate-400 w-full focus:outline-none" ${isManual ? '' : 'readonly'} placeholder="entry.xxxx">
                    </div>
                    ${isManual ? `<button onclick="document.getElementById('card-${uid}').remove()" class="text-slate-600 hover:text-red-400"><i class="fa-solid fa-trash"></i></button>` : ''}
                </div>
                
                <div id="tags-${uid}" class="flex flex-wrap gap-2 mb-3 min-h-[30px]"></div>
                
                <div class="flex gap-2">
                    <input id="input-${uid}" type="text" 
                        class="flex-1 bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-1.5 text-sm focus:border-indigo-500 focus:outline-none text-white placeholder-slate-600" 
                        placeholder="Type answer & press Enter..."
                        onkeypress="handleInputEnter(event, 'input-${uid}', 'tags-${uid}')">
                    <button onclick="manualAddTag('input-${uid}', 'tags-${uid}')" class="bg-indigo-600/20 hover:bg-indigo-600 text-indigo-400 hover:text-white px-3 rounded-lg transition-colors">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                </div>
            `;
            
            return { card, uid };
        }

        async function fetchEntries() {
            const url = document.getElementById('url').value;
            const list = document.getElementById('entry-list');
            
            // UPDATED: Use custom Toast instead of alert
            if(!url) return showToast("Please enter a valid URL", "error");
            
            list.innerHTML = `<div class="text-center py-8 text-indigo-400 animate-pulse"><i class="fa-solid fa-satellite-dish fa-spin mb-2"></i><br>Scanning Form Structure...</div>`;

            try {
                const res = await fetch('/api/parse-url', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({url}) });
                const data = await res.json();
                list.innerHTML = "";

                if(Object.keys(data.entries).length === 0) {
                    list.innerHTML = `<div class="text-center py-8 text-red-400">No entries found.</div>`;
                    return;
                }

                for(const [k, v] of Object.entries(data.entries)) {
                    const { card, uid } = createEntryCard(k, v, false);
                    list.appendChild(card);
                    if(v) v.split(',').forEach(val => createTagUI(`tags-${uid}`, val));
                }
                showToast("Form Structure Loaded!", "success"); // Success Toast
            } catch(e) { 
                list.innerHTML = `<div class="text-center py-8 text-red-400">Error Loading Data</div>`;
                showToast("Failed to fetch form data", "error");
            }
        }

        function addManualEntry() {
            const { card } = createEntryCard('', '', true);
            document.getElementById('entry-list').appendChild(card);
        }

        // --- 6. PROCESS CONTROL ---
        let evtSource;

        async function stopProcess() {
            await fetch('/api/stop', { method: 'POST' });
            document.getElementById('btn-start').innerHTML = `<i class="fa-solid fa-triangle-exclamation mr-2"></i> STOPPING...`;
        }

        function startProcess() {
            const url = document.getElementById('url').value;
            // UPDATED: Custom Toast
            if(!url) return showToast("URL is required to start", "error");

            const entries = {};
            document.querySelectorAll('#entry-list > div').forEach(card => {
                const entryId = card.querySelector('input[placeholder="entry.xxxx"]').value;
                const tagSpans = card.querySelectorAll('.tag-chip');
                const values = Array.from(tagSpans).map(span => span.dataset.value).join(',');
                
                if(entryId && values) entries[entryId] = values;
            });

            // UPDATED: Custom Toast
            if(Object.keys(entries).length === 0) return showToast("Please add entries and answers", "error");

            const params = new URLSearchParams({
                url: url,
                total: document.getElementById('total').value,
                bots: document.getElementById('bots').value,
                delay: document.getElementById('delay').value,
                pages: document.getElementById('pages').value,
                entries: JSON.stringify(entries),
                mode: 'R'
            });

            const btn = document.getElementById('btn-start');
            const btnStop = document.getElementById('btn-stop');
            
            btn.innerHTML = `<i class="fa-solid fa-circle-notch fa-spin mr-2"></i> PROCESSING...`;
            btn.classList.add('opacity-75', 'cursor-not-allowed');
            btn.disabled = true;
            btnStop.classList.remove('hidden');

            const logBox = document.getElementById('log-container');
            logBox.innerHTML = "";
            document.getElementById('stat-success').innerText = "0";
            document.getElementById('stat-fail').innerText = "0";

            showToast("System Started Successfully", "success");

            if(evtSource) evtSource.close();
            evtSource = new EventSource(`/api/stream?${params.toString()}`);
            
            evtSource.onmessage = (e) => {
                const div = document.createElement('div');
                div.innerText = "> " + e.data;
                if(e.data.includes('SUCCESS')) {
                    div.classList.add('text-emerald-400');
                    let s = document.getElementById('stat-success'); s.innerText = parseInt(s.innerText)+1;
                } else if(e.data.includes('FAIL')) {
                    div.classList.add('text-red-400');
                    let s = document.getElementById('stat-fail'); s.innerText = parseInt(s.innerText)+1;
                } else if(e.data.includes('FINISHED') || e.data.includes('Stopped')) {
                    div.classList.add('text-yellow-400', 'font-bold', 'border-t', 'border-slate-800', 'mt-2', 'pt-2');
                    evtSource.close();
                    btn.innerHTML = `<span class="relative z-10 flex items-center justify-center"><i class="fa-solid fa-play mr-2"></i> START SYSTEM</span>`;
                    btn.classList.remove('opacity-75', 'cursor-not-allowed');
                    btn.disabled = false;
                    btnStop.classList.add('hidden');
                    showToast("Process Finished", "info");
                }
                logBox.appendChild(div);
                logBox.scrollTop = logBox.scrollHeight;
            };
            
            evtSource.onerror = () => {
                evtSource.close();
                btn.innerHTML = "RESTART";
                btn.disabled = false;
                btn.classList.remove('opacity-75', 'cursor-not-allowed');
                btnStop.classList.add('hidden');
                showToast("Connection Lost", "error");
            }
        }
    </script>
</body>
</html>
